<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>TACTICAL MOSAIC // C2 THEATER</title>
    <link rel="stylesheet" href="./src/style.css">
</head>
<body>

<div class="classification-banner top">TOP SECRET // SI // TK // NOFORN</div>
<div class="classification-banner bottom">TOP SECRET // SI // TK // NOFORN</div>

<div id="canvas-container"></div>
<div id="vignette"></div>
<div id="scanlines"></div>
<button id="left-drawer-toggle" class="drawer-toggle">LEFT PANEL</button>
<button id="right-drawer-toggle" class="drawer-toggle">RIGHT PANEL</button>

<div class="crosshair-container">
    <div class="crosshair-ring">
        <div class="crosshair-pip"></div>
    </div>
</div>

<div id="confirm-strip" class="confirm-strip">
    <span id="confirm-title" style="color: var(--amber-alert); font-size: 11px; font-weight: 700; letter-spacing: 1px;">REVIEW DESIGNATION</span>
    <span id="confirm-target" style="color: var(--text-primary); font-size: 10px;">--</span>
    <select id="confirm-reason" style="display: none; background: rgba(0,0,0,0.5); color: var(--text-primary); border: 1px solid var(--border-dim); font-family: inherit; font-size: 9px; padding: 2px;">
        <option value="VISUAL_CORROBORATION">VISUAL CORROBORATION</option>
        <option value="MULTI_SENSOR">MULTI SENSOR MATCH</option>
        <option value="ASSUMED_HOSTILE">ASSUMED HOSTILE (ROE)</option>
    </select>
    <span id="confirm-hint" style="color: var(--text-dim); font-size: 9px;">R OR ENTER TO ARM</span>
    <button id="btn-confirm" style="background: var(--amber-alert); color: #000; border: none; padding: 4px 12px; font-family: inherit; font-size: 10px; font-weight: bold; cursor: pointer;">REVIEW [R]</button>
    <button id="btn-cancel" style="background: transparent; color: var(--text-dim); border: 1px solid var(--border-dim); padding: 4px 12px; font-family: inherit; font-size: 10px; cursor: pointer;">CANCEL [ESC]</button>
</div>
<div id="undo-strip" class="undo-strip">
    <span id="undo-text" style="color: var(--cyan-data); font-size: 10px; letter-spacing: 1px;">DESIGNATION COMMITTED</span>
    <button id="btn-undo" style="background: transparent; color: var(--cyan-data); border: 1px solid rgba(0,221,255,0.45); padding: 4px 10px; font-family: inherit; font-size: 10px; cursor: pointer;">UNDO [U]</button>
</div>

<div id="hud">
    <!-- LEFT COLUMN -->
    <div id="left-col">
        <!-- SITUATION PANEL -->
        <div class="panel" style="flex: 0 0 auto;">
            <div class="panel-header">
                <span class="panel-title">SITREP</span>
                <span class="panel-badge badge-live">● LIVE</span>
            </div>
            <div class="panel-body">
                <div class="data-row">
                    <span class="data-label">OP NAME</span>
                    <span class="data-value">MOSAIC GUARDIAN</span>
                </div>
                <div class="data-row">
                    <span class="data-label">AOR</span>
                    <span class="data-value cyan" id="aor-display">SECTOR 4-ALPHA</span>
                </div>
                <div class="data-row">
                    <span class="data-label">DTG</span>
                    <span class="data-value" id="dtg-display">190000ZFEB26</span>
                </div>
                <div class="separator"></div>
                <div class="data-row">
                    <span class="data-label">FPCON</span>
                    <span class="data-value amber" id="fpcon-display">CHARLIE</span>
                </div>
                <div class="data-row">
                    <span class="data-label">THREATCON</span>
                    <span class="data-value red" id="threatcon-display">SUBSTANTIAL</span>
                </div>
                <div class="data-row">
                    <span class="data-label">ROE</span>
                    <span class="data-value">WEAPONS HOLD</span>
                </div>
                <div class="separator"></div>
                <div class="data-row">
                    <span class="data-label">ISR ASSETS</span>
                    <span class="data-value blue">3 ON STATION</span>
                </div>
                <div class="data-row">
                    <span class="data-label">CAS AVAIL</span>
                    <span class="data-value green">2× F-15E / 15 MIN</span>
                </div>
                <div class="data-row">
                    <span class="data-label">FIRES</span>
                    <span class="data-value green">M142 BTRY / READY</span>
                </div>
            </div>
        </div>

        <!-- ACTIVE TRACK (NEW) -->
        <div class="panel" id="active-track-panel" style="flex: 0 0 auto; display: none; transition: opacity 0.3s;">
            <div class="panel-header">
                <span class="panel-title">ACTIVE TRACK</span>
                <span class="panel-badge badge-nominal" id="at-provenance-badge">TRACKING</span>
            </div>
            <div class="panel-body">
                <div class="data-row">
                    <span class="data-label">ID / TYPE</span>
                    <span class="data-value" id="at-id">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">KINEMATICS</span>
                    <span class="data-value" id="at-kinematics">--</span>
                </div>
                <div class="separator"></div>
                <div class="data-row">
                    <span class="data-label">SOURCE</span>
                    <span class="data-value cyan" id="at-source">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">CONFIDENCE</span>
                    <span class="data-value" id="at-confidence">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">AGE</span>
                    <span class="data-value" id="at-age">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">LOCK</span>
                    <span class="data-value cyan" id="at-lock-status">STANDBY</span>
                </div>
                <div class="data-row">
                    <span class="data-label">DEST</span>
                    <span class="data-value amber" id="at-destination">--</span>
                </div>
                <div class="data-row" style="gap: 6px; justify-content: flex-end;">
                    <button id="btn-set-destination" class="at-action-btn">SET DEST</button>
                    <button id="btn-clear-destination" class="at-action-btn">CLEAR DEST</button>
                </div>
            </div>
        </div>

        <!-- TRACK TABLE -->
        <div class="panel" style="flex: 1 1 auto; overflow: hidden;">
            <div class="panel-header">
                <span class="panel-title">TRACK LOG</span>
                <span class="panel-badge badge-alert" id="track-count">12 ACTIVE</span>
            </div>
            <div class="panel-body" style="padding: 4px 8px; overflow-y: auto; max-height: 220px;">
                <table class="track-table" id="track-table">
                    <thead>
                        <tr><th>ID</th><th>TYPE</th><th>BRG</th><th>RNG</th><th>SPD</th><th>TRUST</th></tr>
                    </thead>
                    <tbody id="track-tbody"></tbody>
                </table>
            </div>
        </div>

        <!-- COMMS -->
        <div class="panel" style="flex: 0 0 auto;">
            <div class="panel-header">
                <span class="panel-title">COMMS</span>
                <span class="panel-badge badge-nominal">ENCRYPTED</span>
            </div>
            <div class="panel-body">
                <div class="data-row">
                    <span class="data-label">PRI</span>
                    <span class="data-value cyan">SATCOM CH-7 // 243.0</span>
                </div>
                <div class="data-row">
                    <span class="data-label">SEC</span>
                    <span class="data-value">HF NET 4 // 6.739</span>
                </div>
                <div class="data-row">
                    <span class="data-label">DATALINK</span>
                    <span class="data-value green">LINK-16 ACTIVE</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="link-quality" style="width:87%; background: var(--green-neutral);"></div>
                </div>
            </div>
        </div>

        <div class="panel hud-controls">
            <div class="panel-header">
                <span class="panel-title">HUD CONTROLS</span>
                <span class="panel-badge badge-nominal" id="density-badge">NORMAL</span>
            </div>
            <div class="panel-body">
                <div class="hud-controls-row">
                    <button id="skin-toggle">⬡ SWITCH TO ARCHIVAL SCAN</button>
                    <button id="btn-density" class="hud-btn">DENSITY: NORMAL</button>
                </div>
                <div class="hud-controls-row">
                    <span class="hud-slider-label">PANEL OPACITY <span id="panel-opacity-value">88%</span></span>
                    <input id="panel-opacity" class="hud-slider" type="range" min="35" max="95" step="1" value="88" />
                </div>
                <div class="hud-controls-row">
                    <button id="btn-contrast" class="hud-btn">CONTRAST: STD</button>
                    <button id="btn-motion" class="hud-btn">MOTION: FULL</button>
                </div>
            </div>
        </div>
    </div>

    <!-- TOP CENTER -->
    <div id="top-bar">
        <div class="panel" style="flex: 0 0 auto;">
            <div class="alert-state">
                <div class="alert-indicator" id="alert-dot" style="background: var(--amber-alert); color: var(--amber-alert);"></div>
                <span class="alert-text" id="alert-text" style="color: var(--amber-alert);">CONDITION AMBER</span>
            </div>
        </div>
        <div class="panel" style="flex: 0 0 auto; display: flex; align-items: center; padding: 0 15px; gap: 15px;">
            <div style="text-align: center;">
                <div class="compass">
                    <div class="compass-ring">
                        <span class="compass-n">N</span>
                        <div class="compass-needle" id="compass-needle"></div>
                    </div>
                </div>
            </div>
            <div>
                <div class="data-row">
                    <span class="data-label">MGRS&nbsp;&nbsp;</span>
                    <span class="data-value cyan" id="mgrs-display">38TLN 04825 17530</span>
                </div>
                <div class="data-row">
                    <span class="data-label">ALT&nbsp;&nbsp;</span>
                    <span class="data-value" id="alt-display">FL280 / 8534m MSL</span>
                </div>
            </div>
        </div>
        <div class="panel" style="flex: 0 0 auto; padding: 6px 15px; text-align: right;">
            <div style="font-size: 18px; font-weight: 300; letter-spacing: 2px; color: #fff;" id="zulu-clock">00:00:00Z</div>
            <div style="font-size: 9px; color: var(--text-dim); letter-spacing: 1px;" id="zulu-date">19 FEB 2026</div>
            <div style="font-size: 9px; color: var(--green-neutral); margin-top: 2px;">▲ UPLINK NOMINAL</div>
        </div>
    </div>

    <!-- BOTTOM CENTER -->
    <div id="bottom-bar">
        <div class="panel" style="flex: 1 1 auto; max-width: 40%;">
            <div class="panel-header">
                <span class="panel-title">SIGINT / ELINT FEED</span>
                <div style="display: flex; align-items: center;">
                    <span class="panel-badge badge-live" id="sigint-status-badge">● STREAMING</span>
                    <div class="sigint-filters" id="sigint-filters">
                        <button class="sigint-filter-chip active" data-filter="all">ALL</button>
                        <button class="sigint-filter-chip" data-filter="crit">CRIT</button>
                        <button class="sigint-filter-chip" data-filter="warn">WARN</button>
                        <button class="sigint-filter-chip" data-filter="info">INFO</button>
                        <button class="sigint-filter-chip" data-filter="intel">INTEL</button>
                    </div>
                </div>
            </div>
            <div class="panel-body sigint-feed" id="sigint-feed" style="max-height: 100px; overflow-y: hidden; padding: 4px 8px;"></div>
        </div>
        <div class="panel" id="ops-log-panel" style="flex: 1 1 auto; max-width: 40%; transition: opacity 0.3s;">
            <div class="panel-header">
                <span class="panel-title">OPS / AUDIT LOG</span>
                <div>
                    <span class="panel-badge badge-nominal" style="cursor: pointer; margin-right: 4px;" id="btn-export-log">EXPORT</span>
                    <span class="panel-badge badge-alert" style="cursor: pointer;" id="btn-clear-log">CLEAR</span>
                </div>
            </div>
            <div class="panel-body sigint-feed" id="ops-log-feed" style="max-height: 100px; overflow-y: auto; padding: 4px 8px;"></div>
        </div>
        <div class="panel" style="flex: 0 0 160px; text-align: center;">
            <div class="panel-header">
                <span class="panel-title">CURSOR / TGT</span>
            </div>
            <div class="panel-body">
                <div id="cursor-coords" style="font-size: 12px; color: var(--cyan-data); letter-spacing: 1px;">
                    000.00 / 000.00
                </div>
                <div id="cursor-mgrs" style="font-size: 9px; color: var(--text-dim); margin-top: 2px;">
                    38TLN 00000 00000
                </div>
            </div>
        </div>
    </div>

    <!-- RIGHT COLUMN -->
    <div id="right-col">
        <!-- SENSOR STATUS -->
        <div class="panel" style="flex: 0 0 auto;">
            <div class="panel-header">
                <span class="panel-title">SENSOR PKG</span>
                <span class="panel-badge badge-nominal">NOMINAL</span>
            </div>
            <div class="panel-body">
                <div class="data-row">
                    <span class="data-label">EO/IR</span>
                    <span class="data-value green">● TRACKING</span>
                </div>
                <div class="data-row">
                    <span class="data-label">SAR</span>
                    <span class="data-value green">● ACTIVE</span>
                </div>
                <div class="data-row">
                    <span class="data-label">MTI</span>
                    <span class="data-value green">● 14 MOVERS</span>
                </div>
                <div class="data-row">
                    <span class="data-label">SIGINT</span>
                    <span class="data-value amber">● DEGRADED</span>
                </div>
                <div class="separator"></div>
                <div class="data-row">
                    <span class="data-label">GIMBAL</span>
                    <span class="data-value">AZ 247° / EL -12°</span>
                </div>
                <div class="data-row">
                    <span class="data-label">SLANT RNG</span>
                    <span class="data-value" id="slant-range">14.2 km</span>
                </div>
                <div class="data-row">
                    <span class="data-label">GSD</span>
                    <span class="data-value">0.31m</span>
                </div>
            </div>
        </div>

        <!-- ENGAGEMENT ZONES -->
        <div class="panel" style="flex: 0 0 auto;">
            <div class="panel-header">
                <span class="panel-title">ENG ZONES</span>
            </div>
            <div class="panel-body">
                <div class="data-row">
                    <span class="data-label">SAM-1 (SA-22)</span>
                    <span class="data-value red">● ACTIVE / 15km</span>
                </div>
                <div class="data-row">
                    <span class="data-label">SAM-2 (SA-17)</span>
                    <span class="data-value red">● ACTIVE / 35km</span>
                </div>
                <div class="data-row">
                    <span class="data-label">AAA BELT</span>
                    <span class="data-value amber">● ASSESSED / 4km</span>
                </div>
                <div class="separator"></div>
                <div class="data-row">
                    <span class="data-label">NFZ-ALPHA</span>
                    <span class="data-value cyan">ENFORCED</span>
                </div>
                <div class="data-row">
                    <span class="data-label">ROZ-BRAVO</span>
                    <span class="data-value blue">ACTIVE 0600-1800Z</span>
                </div>
            </div>
        </div>

        <!-- WEATHER / ENV -->
        <div class="panel" style="flex: 0 0 auto;" id="decoy-sim-panel">
            <div class="panel-header">
                <span class="panel-title">DECOY SIM (SAFE)</span>
                <span class="panel-badge badge-nominal" id="decoy-sim-badge">IDLE</span>
            </div>
            <div class="panel-body">
                <div class="data-row">
                    <span class="data-label">PROFILE</span>
                    <select id="decoy-profile-select" class="sim-select"></select>
                </div>
                <div class="data-row">
                    <span class="data-label">DECOYS</span>
                    <span class="data-value cyan" id="decoy-count-value">6</span>
                </div>
                <input type="range" id="decoy-count" class="sim-range" min="2" max="40" step="1" value="6" />
                <div class="data-row">
                    <span class="data-label">MODE</span>
                    <span class="data-value amber">SIM ONLY / NO TX</span>
                </div>
                <div class="data-row">
                    <span class="data-label">ACTIVE</span>
                    <span class="data-value" id="decoy-active">0</span>
                </div>
                <div class="data-row">
                    <span class="data-label">LAST BURST</span>
                    <span class="data-value" id="decoy-last-burst">--</span>
                </div>
                <div class="hud-controls-row" style="margin-top: 6px;">
                    <button id="btn-decoy-start" class="hud-btn">START SIM</button>
                    <button id="btn-decoy-stop" class="hud-btn">STOP</button>
                </div>
            </div>
        </div>

        <!-- WEATHER / ENV -->
        <div class="panel" style="flex: 0 0 auto;">
            <div class="panel-header">
                <span class="panel-title">MET / ENV</span>
            </div>
            <div class="panel-body">
                <div class="data-row">
                    <span class="data-label">WIND</span>
                    <span class="data-value">270° / 12kt G18</span>
                </div>
                <div class="data-row">
                    <span class="data-label">VIS</span>
                    <span class="data-value">8.2km / SCT025</span>
                </div>
                <div class="data-row">
                    <span class="data-label">TEMP</span>
                    <span class="data-value">+14°C / DP +06</span>
                </div>
                <div class="data-row">
                    <span class="data-label">ILLUM</span>
                    <span class="data-value" id="illum-display">42% / WANING</span>
                </div>
            </div>
        </div>

        <!-- PLATFORM -->
        <div class="panel" style="flex: 1 1 auto;">
            <div class="panel-header">
                <span class="panel-title">PLATFORM</span>
            </div>
            <div class="panel-body">
                <div class="data-row">
                    <span class="data-label">CALLSIGN</span>
                    <span class="data-value cyan">REAPER 31</span>
                </div>
                <div class="data-row">
                    <span class="data-label">TYPE</span>
                    <span class="data-value">MQ-9A BLOCK 5</span>
                </div>
                <div class="data-row">
                    <span class="data-label">FUEL</span>
                    <span class="data-value" id="fuel-display">67% / 8.2 HRS</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="fuel-bar" style="width: 67%; background: var(--green-neutral);"></div>
                </div>
                <div class="data-row" style="margin-top: 4px;">
                    <span class="data-label">STORES</span>
                    <span class="data-value">2× GBU-12 / 2× AGM-114</span>
                </div>
                <div class="data-row">
                    <span class="data-label">TOS</span>
                    <span class="data-value" id="tos-display">03:42 REMAINING</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- THREE.JS -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="./sim/profiles.js"></script>
<script type="module" src="./src/main.js"></script>
</body>
</html>
